┃ Проблемные адреса, которые не распознаю

   Артюхиной ул. д. 27 к. 3 (3)
      В скобках тот кто прислал отчёт помечает, что это третья фотка по этому 
      адресу. Мне это парсить точно не стоит. Надо либо научить парсер 
      игнорировать непонятные фрагменты и тогда считать такие фотки 
      дубликатами, либо помечать адрес как ошибочный.

   Миклухо Маклая ул., д. 29, к. А
   Бакинская ул., д. 26, к. ГЛАВНЫЙ
   Коломенский пр., д.4, к."Главный"
      Яндекс-карты не знают такого корпуса. Думаю, что в картах вообще не 
      бывает символьных имён корпусов, а это просто названия зданий внутри 
      самой больницы, которые не употребляются за её стенами. Проблема таких 
      названий в том, что в отличие от названий улиц, их могут сокращать. 
      Например вместо 'к.Терапия' напишут 'к.Тер-я' или 'к.Тер'. Наташа 
      говорит, что не припоминает сокращений, что обычно имена пишут полностью. 
      Можно потом сделать это.



┃ Входные данные
   LibreOffice
      Save As
         CVS
            ; -- Разделитель полей.
            Сохраняй в UTF-8.
            Сохранит только активную таблицу.
   ----
   Обычно одной таблице (вкладке в экселе) соответствует один каталог с 
   фотками. Очень редко (1% случаев) бывает, что двум таблицам соответствует 
   один каталог с фотками. Но если такое и случается, то обычно Наташа приводит 
   всё к первому варианту. Думаю, для начала надо сделать для соответствия 
   одной таблицы одниму каталогу.



┃ Как сравниваются адреса

   Так как смысл программы именно в проверке точного смыслового соответствия 
   адресов при том, что они записаны в вольном стиле разными людьми, то я 
   вынужден выполнять сложный покомпонентный разбор адресов, чтобы потом 
   сравнить значение каждой компоненты.

   Если какие-то компоненты различаются или не заданы в одном из адресов, то 
   значит адреса не совпали. Возможно в компонентах допущена ошибка и надо 
   помочь пользователю найти её. Для этого надо показать пользователю 
   максимально похожие адреса, чтобы он глазами искал в них несоответствия.

   Похожие адреса ищутся линейным поиском с применением метода 
   Дамерау-Левенштейна. Из проверяемого адреса берётся улица и вычисляется 
   расстояние Дамерау-Левенштейна от неё для каждого слова в проверяемом 
   адресе. За результат берётся минимальное расстояние до какого-либо слова. 
   Именно так я делал в питоне.

   Я думаю, что для этого нужно найти адреса с той же улицей или похожей улицей 
   методом дамарау-левенштейна.



┃ Порядок разбора компоненты


   # Префиксные

      Начинаю разбор с префиксных форм, так как они чаще используются и быстрее 
      проверяются (фэйл случается с первых символов в ключе).

      Порядок проверки префиксных компонент между цифровой или символьной не 
      имеет значения, так как они однозначно определяются по ключу и примерно 
      одинаково часто встречаются.

      Digit.hs
         prefix
            <ключ> -- тут часто и дёшево фэйлит
            number -- фэйл тут — это логическая ошибка в адресе
      Symbol.hs
         prefix
            <ключ> -- тут часто и дёшево фэйлит
            value  -- фэйл тут — это логическая ошибка в адресе


   # Постфиксные

      Из постфиксных форм надо обязательно сначала проверять цифровые, так как 
      их значение является подмножеством символьного значения.

      Digit.hs
         postfix
            number
               │ Фэйл тут означает символьную компоненту.
               │ Распарсить номер надо один раз для всех цифровых компонент.
               <ключ>
                  Тут часто и дёшево фэйлит при выборе между числовыми 
                  компонентами.
      Symbol.hs
         postfix
            value
               │ Никогда не фэйлит
               │ Извлечь значение надо один раз для всех символьных компонент.
               <ключ>
                  Фэйл тут означает, что были перепробованы все варианты 
                  компоненты и её не удалось распарсить.



┃ Английское название компонент адреса
   Англичане просто пишут номер дома без всяких суффиксов. Но называют это 
   House numbering.

   Можно использовать такой набор вольного перевода:
      house — номер дома
      block — корпус
      building — строение
      estate — владение, это какой-то вольный русский перевод.

   Но с дргой стороны, у англичан нет таких понятий, резонно использовать 
   просто транслит. А разницы между "посёлок", "село", "деревня" для англичан 
   вообще нет.
